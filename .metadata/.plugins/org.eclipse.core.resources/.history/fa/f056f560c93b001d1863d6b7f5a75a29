/*
 * Servo_Motor.h
 *
 *  Created on: 24-Sep-2022
 *      Author: Sanjay
 */

#ifndef INC_SERVO_MOTOR_H_
#define INC_SERVO_MOTOR_H_

typedef struct{
	uint8_t pin;		//pin to which servo is connected
	uint8_t port;		//port on which servo is connected
}servo_connected_at_t;

static typedef struct{
	uint8_t		timer;			//timer used to generate pwm
	uint8_t		timchannel;		//timer channel to which servo is connected
	uint8_t		timclock;		//Clock source for the timer
	uint8_t		timprescalar;	//Timer prescalar
	uint32_t	timperiod;		//timer period(ARR)
	uint32_t	tim_pulse;		//timer pulse(CCR1)
}servo_config_t;

void servo_connected_to(uint8_t *port,uint8_t *pin);
void servo_Init(servo_connected_at_t *servo);
void servo_Deinit(servo_connected_at_t *servo);
void move_servo(servo_connected_at_t *servo,uint8_t *angle);
static uint32_t	map(uint32_t *value,uint32_t *minO,uint32_t *maxO,uint32_t minI,uint32_t *maxI);
static void generatepwm(uint32_t *tim,uint32_t *pulse);



#endif /* INC_SERVO_MOTOR_H_ */
